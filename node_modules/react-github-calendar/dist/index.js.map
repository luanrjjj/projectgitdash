{"version":3,"file":"index.js","sources":["../src/index.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback, FunctionComponent } from 'react';\nimport Calendar, {\n  Skeleton as CalendarSkeleton,\n  Props as CalendarProps,\n  CalendarData,\n  Theme,\n} from 'react-activity-calendar';\n\nimport { Year, ApiResponse } from './types';\n\ninterface Props extends Omit<CalendarProps, 'data'> {\n  username: string;\n  year?: Year;\n}\n\nasync function fetchCalendarData(username: string, year: Year): Promise<ApiResponse> {\n  return (await fetch(`${API_URL}${username}?y=${year}`)).json();\n}\n\nconst GitHubCalendar: FunctionComponent<Props> = ({\n  username,\n  year = 'last',\n  theme = DEFAULT_THEME,\n  ...calendarProps\n}) => {\n  const [data, setData] = useState<CalendarData | null>(null);\n  const [loading, setLoading] = useState<boolean>(false);\n  const [error, setError] = useState<Error | null>(null);\n\n  const fetchData = useCallback(() => {\n    setLoading(true);\n    setError(null);\n    fetchCalendarData(username, year)\n      .then(({ contributions }) => setData(contributions))\n      .catch(setError)\n      .finally(() => setLoading(false));\n  }, [username, year]);\n\n  useEffect(fetchData, []); // on mount\n  useEffect(fetchData, [username, year]);\n\n  if (error) {\n    return <p>Error :(</p>;\n  }\n\n  if (loading || !data) {\n    return <CalendarSkeleton loading />;\n  }\n\n  const labels = {\n    totalCount: `{{count}} contributions in ${year === 'last' ? 'the last year' : '{{year}}'}`,\n  };\n\n  return <Calendar data={data} theme={theme} labels={labels} {...calendarProps} />;\n};\n\n// GitHub theme\nconst DEFAULT_THEME: Theme = {\n  level4: '#216e39',\n  level3: '#30a14e',\n  level2: '#40c463',\n  level1: '#9be9a8',\n  level0: '#ebedf0',\n};\n\nconst API_URL = 'https://github-contributions-api.jogruber.de/v4/';\n\nexport default GitHubCalendar;\n"],"names":["fetchCalendarData","username","year","fetch","API_URL","json","GitHubCalendar","theme","DEFAULT_THEME","calendarProps","data","setData","useState","loading","setLoading","error","setError","fetchData","useCallback","then","contributions","catch","finally","useEffect","React","CalendarSkeleton","labels","totalCount","Calendar","level4","level3","level2","level1","level0"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAeA,eAAeA,iBAAf,CAAiCC,QAAjC,EAAmDC,IAAnD,EAAqF;AACnF,SAAO,CAAC,MAAMC,KAAK,CAAE,GAAEC,OAAQ,GAAEH,QAAS,MAAKC,IAAK,EAAjC,CAAZ,EAAiDG,IAAjD,EAAP;AACD;;MAEKC,cAAwC,GAAG,CAAC;AAChDL,EAAAA,QADgD;AAEhDC,EAAAA,IAAI,GAAG,MAFyC;AAGhDK,EAAAA,KAAK,GAAGC,aAHwC;AAIhD,KAAGC;AAJ6C,CAAD,KAK3C;AACJ,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBC,cAAQ,CAAsB,IAAtB,CAAhC;AACA,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBF,cAAQ,CAAU,KAAV,CAAtC;AACA,QAAM,CAACG,KAAD,EAAQC,QAAR,IAAoBJ,cAAQ,CAAe,IAAf,CAAlC;AAEA,QAAMK,SAAS,GAAGC,iBAAW,CAAC,MAAM;AAClCJ,IAAAA,UAAU,CAAC,IAAD,CAAV;AACAE,IAAAA,QAAQ,CAAC,IAAD,CAAR;AACAhB,IAAAA,iBAAiB,CAACC,QAAD,EAAWC,IAAX,CAAjB,CACGiB,IADH,CACQ,CAAC;AAAEC,MAAAA;AAAF,KAAD,KAAuBT,OAAO,CAACS,aAAD,CADtC,EAEGC,KAFH,CAESL,QAFT,EAGGM,OAHH,CAGW,MAAMR,UAAU,CAAC,KAAD,CAH3B;AAID,GAP4B,EAO1B,CAACb,QAAD,EAAWC,IAAX,CAP0B,CAA7B;AASAqB,EAAAA,eAAS,CAACN,SAAD,EAAY,EAAZ,CAAT,CAdI;;AAeJM,EAAAA,eAAS,CAACN,SAAD,EAAY,CAAChB,QAAD,EAAWC,IAAX,CAAZ,CAAT;;AAEA,MAAIa,KAAJ,EAAW;AACT,wBAAOS,8DAAP;AACD;;AAED,MAAIX,OAAO,IAAI,CAACH,IAAhB,EAAsB;AACpB,wBAAOc,wCAACC,iBAAD;AAAkB,MAAA,OAAO;AAAzB,MAAP;AACD;;AAED,QAAMC,MAAM,GAAG;AACbC,IAAAA,UAAU,EAAG,8BAA6BzB,IAAI,KAAK,MAAT,GAAkB,eAAlB,GAAoC,UAAW;AAD5E,GAAf;AAIA,sBAAOsB,wCAACI,4BAAD;AAAU,IAAA,IAAI,EAAElB,IAAhB;AAAsB,IAAA,KAAK,EAAEH,KAA7B;AAAoC,IAAA,MAAM,EAAEmB;AAA5C,KAAwDjB,aAAxD,EAAP;AACD;;;AAGD,MAAMD,aAAoB,GAAG;AAC3BqB,EAAAA,MAAM,EAAE,SADmB;AAE3BC,EAAAA,MAAM,EAAE,SAFmB;AAG3BC,EAAAA,MAAM,EAAE,SAHmB;AAI3BC,EAAAA,MAAM,EAAE,SAJmB;AAK3BC,EAAAA,MAAM,EAAE;AALmB,CAA7B;AAQA,MAAM7B,OAAO,GAAG,kDAAhB;;;;"}