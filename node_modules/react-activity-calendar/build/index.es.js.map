{"version":3,"file":"index.es.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/util.ts","../src/component/ActivityCalendar.tsx"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import color, { ColorInput } from 'tinycolor2';\nimport differenceInCalendarDays from 'date-fns/differenceInCalendarDays';\nimport eachDayOfInterval from 'date-fns/eachDayOfInterval';\nimport formatISO from 'date-fns/formatISO';\nimport getDay from 'date-fns/getDay';\nimport getMonth from 'date-fns/getMonth';\nimport nextDay from 'date-fns/nextDay';\nimport parseISO from 'date-fns/parseISO';\nimport subWeeks from 'date-fns/subWeeks';\nimport type { Day as WeekDay } from 'date-fns';\n\nimport { Day, Weeks, Theme } from './types';\n\nexport const NAMESPACE = 'react-activity-calendar';\nexport const MIN_DISTANCE_MONTH_LABELS = 2;\n\nconst DEFAULT_THEME = createCalendarTheme('#042a33');\n\ninterface Label {\n  x: number;\n  y: number;\n  text: string;\n}\n\nexport function groupByWeeks(\n  days: Array<Day>,\n  weekStart: WeekDay = 0, // 0 = Sunday\n): Weeks {\n  if (days.length === 0) {\n    return [];\n  }\n\n  // Determine the first date of the calendar. If the first contribution date is\n  // not specified week day the desired day one week earlier will be selected.\n  const firstDate = parseISO(days[0].date);\n  const firstCalendarDate =\n    getDay(firstDate) === weekStart ? firstDate : subWeeks(nextDay(firstDate, weekStart), 1);\n\n  // In order to correctly group contributions by week it is necessary to left pad the list\n  const paddedDays = [\n    ...Array(differenceInCalendarDays(firstDate, firstCalendarDate)).fill(undefined),\n    ...days,\n  ];\n\n  return Array(Math.ceil(paddedDays.length / 7))\n    .fill(undefined)\n    .map((_, calendarWeek) => paddedDays.slice(calendarWeek * 7, calendarWeek * 7 + 7));\n}\n\nexport function getMonthLabels(\n  weeks: Weeks,\n  monthNames: Array<string> = DEFAULT_MONTH_LABELS,\n): Array<Label> {\n  return weeks\n    .reduce<Array<Label>>((labels, week, index) => {\n      const firstWeekDay = week.find(day => day !== undefined);\n\n      if (!firstWeekDay) {\n        throw new Error(`Unexpected error: Week is empty: [${week}]`);\n      }\n\n      const month = monthNames[getMonth(parseISO(firstWeekDay.date))];\n      const prev = labels[labels.length - 1];\n\n      if (index === 0 || prev.text !== month) {\n        return [\n          ...labels,\n          {\n            x: index,\n            y: 0,\n            text: month,\n          },\n        ];\n      }\n\n      return labels;\n    }, [])\n    .filter((label, index, labels) => {\n      if (index === 0) {\n        return labels[1] && labels[1].x - label.x > MIN_DISTANCE_MONTH_LABELS;\n      }\n\n      return true;\n    });\n}\n\nexport function createCalendarTheme(\n  baseColor: ColorInput,\n  emptyColor = color('white').darken(8).toHslString(),\n): Theme {\n  const base = color(baseColor);\n\n  if (!base.isValid()) {\n    return DEFAULT_THEME;\n  }\n\n  return {\n    level4: base.setAlpha(0.92).toHslString(),\n    level3: base.setAlpha(0.76).toHslString(),\n    level2: base.setAlpha(0.6).toHslString(),\n    level1: base.setAlpha(0.44).toHslString(),\n    level0: emptyColor,\n  };\n}\n\nexport function getTheme(theme?: Theme, color?: ColorInput): Theme {\n  if (theme) {\n    return Object.assign({}, DEFAULT_THEME, theme);\n  }\n\n  if (color) {\n    return createCalendarTheme(color);\n  }\n\n  return DEFAULT_THEME;\n}\n\nexport function getClassName(name: string, styles?: string): string {\n  if (styles) {\n    return `${NAMESPACE}__${name} ${styles}`;\n  }\n\n  return `${NAMESPACE}__${name}`;\n}\n\nexport function generateEmptyData(): Array<Day> {\n  const year = new Date().getFullYear();\n  const days = eachDayOfInterval({\n    start: new Date(year, 0, 1),\n    end: new Date(year, 11, 31),\n  });\n\n  return days.map(date => ({\n    date: formatISO(date, { representation: 'date' }),\n    count: 0,\n    level: 0,\n  }));\n}\n\nexport const DEFAULT_MONTH_LABELS = [\n  'Jan',\n  'Feb',\n  'Mar',\n  'Apr',\n  'May',\n  'Jun',\n  'Jul',\n  'Aug',\n  'Sep',\n  'Oct',\n  'Nov',\n  'Dec',\n];\n\nexport const DEFAULT_WEEKDAY_LABELS = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n\nexport const DEFAULT_LABELS = {\n  months: DEFAULT_MONTH_LABELS,\n  weekdays: DEFAULT_WEEKDAY_LABELS,\n  totalCount: '{{count}} contributions in {{year}}',\n  legend: {\n    less: 'Less',\n    more: 'More',\n  },\n};\n","import React, { FunctionComponent, CSSProperties, ReactNode } from 'react';\nimport tinycolor, { ColorInput } from 'tinycolor2';\nimport format from 'date-fns/format';\nimport getDay from 'date-fns/getDay';\nimport getYear from 'date-fns/getYear';\nimport parseISO from 'date-fns/parseISO';\nimport type { Day as WeekDay } from 'date-fns';\n\nimport styles from './styles.css';\n\nimport { Day, Labels, Theme } from '../types';\nimport {\n  generateEmptyData,\n  getClassName,\n  getMonthLabels,\n  getTheme,\n  groupByWeeks,\n  MIN_DISTANCE_MONTH_LABELS,\n  NAMESPACE,\n  DEFAULT_WEEKDAY_LABELS,\n  DEFAULT_LABELS,\n} from '../util';\n\ntype CalendarData = Array<Day>;\n\nexport interface Props {\n  /**\n   * List of calendar entries. Every `Day` object requires an ISO 8601 `date`\n   * property in the format `yyyy-MM-dd`, a `count` property with the amount\n   * of tracked data and finally a `level` property in the range `0 - 4` to\n   * specify activity intensity.\n   *\n   * Example object:\n   *\n   * ```json\n   * {\n   *   date: \"2021-02-20\",\n   *   count: 16,\n   *   level: 3\n   * }\n   * ```\n   */\n  data: CalendarData;\n  /**\n   * Margin between blocks in pixels.\n   */\n  blockMargin?: number;\n  /**\n   * Border radius of blocks in pixels.\n   */\n  blockRadius?: number;\n  /**\n   * Block size in pixels.\n   */\n  blockSize?: number;\n  /**\n   * Pass `<ReactTooltip html />` as child to show tooltips.\n   */\n  children?: ReactNode;\n  /**\n   * Base color to compute graph intensity hues (darkest color). Any valid CSS color is accepted\n   */\n  color?: ColorInput;\n  /**\n   * A date-fns/format compatible date string used in tooltips.\n   */\n  dateFormat?: string;\n  /**\n   * Font size for text in pixels.\n   */\n  fontSize?: number;\n  /**\n   * Toggle to hide color legend below calendar.\n   */\n  hideColorLegend?: boolean;\n  /**\n   * Toggle to hide month labels above calendar.\n   */\n  hideMonthLabels?: boolean;\n  /**\n   * Toggle to hide total count below calendar.\n   */\n  hideTotalCount?: boolean;\n  /**\n   * Localization strings for all calendar labels. `totalCount` supports the placeholders `{{count}}` and `{{year}}`:\n   */\n  labels?: Labels;\n  /**\n   * Toggle for loading state. `data` property will be ignored if set.\n   */\n  loading?: boolean;\n  /**\n   * Toggle to show weekday labels left to the calendar.\n   */\n  showWeekdayLabels?: boolean;\n  /**\n   * Style object to pass to component container.\n   */\n  style?: CSSProperties;\n  /**\n   * An object specifying all theme colors explicitly`.\n   */\n  theme?: Theme;\n  /**\n   * Index of day to be used as start of week. 0 represents Sunday.\n   */\n  weekStart?: WeekDay;\n}\n\nconst ActivityCalendar: FunctionComponent<Props> = ({\n  data,\n  blockMargin = 4,\n  blockRadius = 2,\n  blockSize = 12,\n  children,\n  color = undefined,\n  dateFormat = 'MMM do, yyyy',\n  fontSize = 14,\n  hideColorLegend = false,\n  hideMonthLabels = false,\n  hideTotalCount = false,\n  labels: labelsProp,\n  loading = false,\n  showWeekdayLabels = false,\n  style = {},\n  theme: themeProp,\n  weekStart = 0, // Sunday\n}: Props) => {\n  if (loading) {\n    data = generateEmptyData();\n  }\n\n  if (data.length === 0) {\n    return null;\n  }\n\n  const weeks = groupByWeeks(data, weekStart);\n  const totalCount = data.reduce((sum, day) => sum + day.count, 0);\n  const year = getYear(parseISO(data[0]?.date));\n\n  const theme = getTheme(themeProp, color);\n  const labels = Object.assign({}, DEFAULT_LABELS, labelsProp);\n  const textHeight = hideMonthLabels ? 0 : fontSize + 2 * blockMargin;\n\n  function getDimensions() {\n    return {\n      width: weeks.length * (blockSize + blockMargin) - blockMargin,\n      height: textHeight + (blockSize + blockMargin) * 7 - blockMargin,\n    };\n  }\n\n  function getTooltipMessage(contribution: Day) {\n    const date = format(parseISO(contribution.date), dateFormat);\n    return `<strong>${contribution.count} contributions</strong> on ${date}`;\n  }\n\n  function renderLabels() {\n    const style = {\n      fontSize,\n    };\n\n    if (!showWeekdayLabels && hideMonthLabels) {\n      return null;\n    }\n\n    return (\n      <>\n        {showWeekdayLabels && (\n          <g className={getClassName('legend-weekday')} style={style}>\n            {weeks[1].map((day, y) => {\n              if (!day || y % 2 === 0) {\n                return null;\n              }\n\n              const dayIndex = getDay(parseISO(day.date));\n\n              return (\n                <text\n                  x={-2 * blockMargin}\n                  y={textHeight + (fontSize / 2 + blockMargin) + (blockSize + blockMargin) * y}\n                  textAnchor=\"end\"\n                  key={day.date}\n                >\n                  {labels.weekdays ? labels.weekdays[dayIndex] : DEFAULT_WEEKDAY_LABELS[dayIndex]}\n                </text>\n              );\n            })}\n          </g>\n        )}\n        {!hideMonthLabels && (\n          <g className={getClassName('legend-month')} style={style}>\n            {getMonthLabels(weeks, labels.months).map(({ text, x }, index, labels) => {\n              // Skip the first month label if there's not enough space to the next one\n              if (index === 0 && labels[1] && labels[1].x - x <= MIN_DISTANCE_MONTH_LABELS) {\n                return null;\n              }\n\n              return (\n                <text x={(blockSize + blockMargin) * x} alignmentBaseline=\"hanging\" key={x}>\n                  {text}\n                </text>\n              );\n            })}\n          </g>\n        )}\n      </>\n    );\n  }\n\n  function renderBlocks() {\n    return weeks\n      .map((week, weekIndex) =>\n        week.map((day, dayIndex) => {\n          if (!day) {\n            return null;\n          }\n\n          const style = loading\n            ? {\n                animation: `${styles.loadingAnimation} 1.5s ease-in-out infinite`,\n                animationDelay: `${weekIndex * 20 + dayIndex * 20}ms`,\n              }\n            : undefined;\n\n          return (\n            <rect\n              x={0}\n              y={textHeight + (blockSize + blockMargin) * dayIndex}\n              width={blockSize}\n              height={blockSize}\n              fill={theme[`level${day.level}` as keyof Theme]}\n              rx={blockRadius}\n              ry={blockRadius}\n              className={styles.block}\n              data-date={day.date}\n              data-tip={children ? getTooltipMessage(day) : undefined}\n              key={day.date}\n              style={style}\n            />\n          );\n        }),\n      )\n      .map((week, x) => (\n        <g key={x} transform={`translate(${(blockSize + blockMargin) * x}, 0)`}>\n          {week}\n        </g>\n      ));\n  }\n\n  function renderFooter() {\n    if (hideTotalCount && hideColorLegend) {\n      return null;\n    }\n\n    return (\n      <footer\n        className={getClassName('footer', styles.footer)}\n        style={{ marginTop: blockMargin, fontSize }}\n      >\n        {/* Placeholder */}\n        {loading && <div>&nbsp;</div>}\n\n        {!loading && !hideTotalCount && (\n          <div className={getClassName('count')}>\n            {labels.totalCount\n              ? labels.totalCount\n                  .replace('{{count}}', String(totalCount))\n                  .replace('{{year}}', String(year))\n              : `${totalCount} contributions in ${year}`}\n          </div>\n        )}\n\n        {!loading && !hideColorLegend && (\n          <div className={getClassName('legend-colors')} style={{ marginLeft: 'auto' }}>\n            <span style={{ marginRight: '0.5em' }}>{labels?.legend?.less ?? 'Less'}</span>\n            {Array(5)\n              .fill(undefined)\n              .map((_, index) => (\n                <svg width={blockSize} height={blockSize} key={index} style={{ margin: '0 0.1em' }}>\n                  <rect\n                    width={blockSize}\n                    height={blockSize}\n                    fill={theme[`level${index}` as keyof Theme]}\n                    rx={blockRadius}\n                    ry={blockRadius}\n                  />\n                </svg>\n              ))}\n            <span style={{ marginLeft: '0.5em' }}>{labels?.legend?.more ?? 'More'}</span>\n          </div>\n        )}\n      </footer>\n    );\n  }\n\n  const { width, height } = getDimensions();\n  const additionalStyles = {\n    width,\n    maxWidth: '100%',\n    // Required to have correct colors in CSS loading animation\n    [`--${NAMESPACE}-loading`]: theme.level0,\n    [`--${NAMESPACE}-loading-active`]: tinycolor(theme.level0).darken(8).toString(),\n  };\n\n  return (\n    <article className={NAMESPACE} style={{ ...style, ...additionalStyles }}>\n      <svg\n        width={width}\n        height={height}\n        viewBox={`0 0 ${width} ${height}`}\n        className={getClassName('calendar', styles.calendar)}\n      >\n        {!loading && renderLabels()}\n        {renderBlocks()}\n      </svg>\n      {renderFooter()}\n      {children}\n    </article>\n  );\n};\n\nexport const Skeleton: FunctionComponent<Omit<Props, 'data'>> = props => (\n  <ActivityCalendar data={[]} {...props} />\n);\n\nexport default ActivityCalendar;\n"],"names":["NAMESPACE","MIN_DISTANCE_MONTH_LABELS","DEFAULT_THEME","createCalendarTheme","groupByWeeks","days","weekStart","length","firstDate","parseISO","date","firstCalendarDate","getDay","subWeeks","nextDay","paddedDays","Array","differenceInCalendarDays","fill","undefined","Math","ceil","map","_","calendarWeek","slice","getMonthLabels","weeks","monthNames","DEFAULT_MONTH_LABELS","reduce","labels","week","index","firstWeekDay","find","day","Error","month","getMonth","prev","text","x","y","filter","label","baseColor","emptyColor","color","darken","toHslString","base","isValid","level4","setAlpha","level3","level2","level1","level0","getTheme","theme","Object","assign","getClassName","name","styles","generateEmptyData","year","Date","getFullYear","eachDayOfInterval","start","end","formatISO","representation","count","level","DEFAULT_WEEKDAY_LABELS","DEFAULT_LABELS","months","weekdays","totalCount","legend","less","more","ActivityCalendar","data","blockMargin","blockRadius","blockSize","children","dateFormat","fontSize","hideColorLegend","hideMonthLabels","hideTotalCount","labelsProp","loading","showWeekdayLabels","style","themeProp","sum","getYear","textHeight","getDimensions","width","height","getTooltipMessage","contribution","format","renderLabels","dayIndex","renderBlocks","weekIndex","animation","loadingAnimation","animationDelay","block","renderFooter","footer","marginTop","replace","String","marginLeft","marginRight","margin","additionalStyles","maxWidth","tinycolor","toString","calendar","Skeleton","props"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAAS,WAAW,CAAC,GAAG,EAAE,GAAG,EAAE;AAC/B,EAAE,KAAK,GAAG,KAAK,KAAK,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC;AACjC,EAAE,IAAI,QAAQ,GAAG,GAAG,CAAC,QAAQ,CAAC;AAC9B;AACA,EAAE,IAAI,CAAC,GAAG,IAAI,OAAO,QAAQ,KAAK,WAAW,EAAE,EAAE,OAAO,EAAE;AAC1D;AACA,EAAE,IAAI,IAAI,GAAG,QAAQ,CAAC,IAAI,IAAI,QAAQ,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;AACvE,EAAE,IAAI,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;AAC9C,EAAE,KAAK,CAAC,IAAI,GAAG,UAAU,CAAC;AAC1B;AACA,EAAE,IAAI,QAAQ,KAAK,KAAK,EAAE;AAC1B,IAAI,IAAI,IAAI,CAAC,UAAU,EAAE;AACzB,MAAM,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;AAChD,KAAK,MAAM;AACX,MAAM,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;AAC9B,KAAK;AACL,GAAG,MAAM;AACT,IAAI,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;AAC5B,GAAG;AACH;AACA,EAAE,IAAI,KAAK,CAAC,UAAU,EAAE;AACxB,IAAI,KAAK,CAAC,UAAU,CAAC,OAAO,GAAG,GAAG,CAAC;AACnC,GAAG,MAAM;AACT,IAAI,KAAK,CAAC,WAAW,CAAC,QAAQ,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC;AACpD,GAAG;AACH;;;;;;ACZO,MAAMA,SAAS,GAAG,yBAAlB;AACA,MAAMC,yBAAyB,GAAG,CAAlC;AAEP,MAAMC,aAAa,GAAGC,mBAAmB,CAAC,SAAD,CAAzC;AAQO,SAASC,YAAT,CACLC,IADK,EAELC,SAAkB,GAAG,CAFhB;AAAA,EAGE;AACP,MAAID,IAAI,CAACE,MAAL,KAAgB,CAApB,EAAuB;AACrB,WAAO,EAAP;AACD,GAHM;AAMP;;;AACA,QAAMC,SAAS,GAAGC,QAAQ,CAACJ,IAAI,CAAC,CAAD,CAAJ,CAAQK,IAAT,CAA1B;AACA,QAAMC,iBAAiB,GACrBC,MAAM,CAACJ,SAAD,CAAN,KAAsBF,SAAtB,GAAkCE,SAAlC,GAA8CK,QAAQ,CAACC,OAAO,CAACN,SAAD,EAAYF,SAAZ,CAAR,EAAgC,CAAhC,CADxD,CARO;;AAYP,QAAMS,UAAU,GAAG,CACjB,GAAGC,KAAK,CAACC,wBAAwB,CAACT,SAAD,EAAYG,iBAAZ,CAAzB,CAAL,CAA8DO,IAA9D,CAAmEC,SAAnE,CADc,EAEjB,GAAGd,IAFc,CAAnB;AAKA,SAAOW,KAAK,CAACI,IAAI,CAACC,IAAL,CAAUN,UAAU,CAACR,MAAX,GAAoB,CAA9B,CAAD,CAAL,CACJW,IADI,CACCC,SADD,EAEJG,GAFI,CAEA,CAACC,CAAD,EAAIC,YAAJ,KAAqBT,UAAU,CAACU,KAAX,CAAiBD,YAAY,GAAG,CAAhC,EAAmCA,YAAY,GAAG,CAAf,GAAmB,CAAtD,CAFrB,CAAP;AAGD;AAEM,SAASE,cAAT,CACLC,KADK,EAELC,UAAyB,GAAGC,oBAFvB,EAGS;AACd,SAAOF,KAAK,CACTG,MADI,CACiB,CAACC,MAAD,EAASC,IAAT,EAAeC,KAAf,KAAyB;AAC7C,UAAMC,YAAY,GAAGF,IAAI,CAACG,IAAL,CAAUC,GAAG,IAAIA,GAAG,KAAKjB,SAAzB,CAArB;;AAEA,QAAI,CAACe,YAAL,EAAmB;AACjB,YAAM,IAAIG,KAAJ,CAAW,qCAAoCL,IAAK,GAApD,CAAN;AACD;;AAED,UAAMM,KAAK,GAAGV,UAAU,CAACW,QAAQ,CAAC9B,QAAQ,CAACyB,YAAY,CAACxB,IAAd,CAAT,CAAT,CAAxB;AACA,UAAM8B,IAAI,GAAGT,MAAM,CAACA,MAAM,CAACxB,MAAP,GAAgB,CAAjB,CAAnB;;AAEA,QAAI0B,KAAK,KAAK,CAAV,IAAeO,IAAI,CAACC,IAAL,KAAcH,KAAjC,EAAwC;AACtC,aAAO,CACL,GAAGP,MADE,EAEL;AACEW,QAAAA,CAAC,EAAET,KADL;AAEEU,QAAAA,CAAC,EAAE,CAFL;AAGEF,QAAAA,IAAI,EAAEH;AAHR,OAFK,CAAP;AAQD;;AAED,WAAOP,MAAP;AACD,GAvBI,EAuBF,EAvBE,EAwBJa,MAxBI,CAwBG,CAACC,KAAD,EAAQZ,KAAR,EAAeF,MAAf,KAA0B;AAChC,QAAIE,KAAK,KAAK,CAAd,EAAiB;AACf,aAAOF,MAAM,CAAC,CAAD,CAAN,IAAaA,MAAM,CAAC,CAAD,CAAN,CAAUW,CAAV,GAAcG,KAAK,CAACH,CAApB,GAAwBzC,yBAA5C;AACD;;AAED,WAAO,IAAP;AACD,GA9BI,CAAP;AA+BD;AAEM,SAASE,mBAAT,CACL2C,SADK,EAELC,UAAU,GAAGC,KAAK,CAAC,OAAD,CAAL,CAAeC,MAAf,CAAsB,CAAtB,EAAyBC,WAAzB,EAFR,EAGE;AACP,QAAMC,IAAI,GAAGH,KAAK,CAACF,SAAD,CAAlB;;AAEA,MAAI,CAACK,IAAI,CAACC,OAAL,EAAL,EAAqB;AACnB,WAAOlD,aAAP;AACD;;AAED,SAAO;AACLmD,IAAAA,MAAM,EAAEF,IAAI,CAACG,QAAL,CAAc,IAAd,EAAoBJ,WAApB,EADH;AAELK,IAAAA,MAAM,EAAEJ,IAAI,CAACG,QAAL,CAAc,IAAd,EAAoBJ,WAApB,EAFH;AAGLM,IAAAA,MAAM,EAAEL,IAAI,CAACG,QAAL,CAAc,GAAd,EAAmBJ,WAAnB,EAHH;AAILO,IAAAA,MAAM,EAAEN,IAAI,CAACG,QAAL,CAAc,IAAd,EAAoBJ,WAApB,EAJH;AAKLQ,IAAAA,MAAM,EAAEX;AALH,GAAP;AAOD;AAEM,SAASY,QAAT,CAAkBC,KAAlB,EAAiCZ,KAAjC,EAA4D;AACjE,MAAIY,KAAJ,EAAW;AACT,WAAOC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB5D,aAAlB,EAAiC0D,KAAjC,CAAP;AACD;;AAED,MAAIZ,KAAJ,EAAW;AACT,WAAO7C,mBAAmB,CAAC6C,KAAD,CAA1B;AACD;;AAED,SAAO9C,aAAP;AACD;AAEM,SAAS6D,YAAT,CAAsBC,IAAtB,EAAoCC,MAApC,EAA6D;AAClE,MAAIA,MAAJ,EAAY;AACV,WAAQ,GAAEjE,SAAU,KAAIgE,IAAK,IAAGC,MAAO,EAAvC;AACD;;AAED,SAAQ,GAAEjE,SAAU,KAAIgE,IAAK,EAA7B;AACD;AAEM,SAASE,iBAAT,GAAyC;AAC9C,QAAMC,IAAI,GAAG,IAAIC,IAAJ,GAAWC,WAAX,EAAb;AACA,QAAMhE,IAAI,GAAGiE,iBAAiB,CAAC;AAC7BC,IAAAA,KAAK,EAAE,IAAIH,IAAJ,CAASD,IAAT,EAAe,CAAf,EAAkB,CAAlB,CADsB;AAE7BK,IAAAA,GAAG,EAAE,IAAIJ,IAAJ,CAASD,IAAT,EAAe,EAAf,EAAmB,EAAnB;AAFwB,GAAD,CAA9B;AAKA,SAAO9D,IAAI,CAACiB,GAAL,CAASZ,IAAI,KAAK;AACvBA,IAAAA,IAAI,EAAE+D,SAAS,CAAC/D,IAAD,EAAO;AAAEgE,MAAAA,cAAc,EAAE;AAAlB,KAAP,CADQ;AAEvBC,IAAAA,KAAK,EAAE,CAFgB;AAGvBC,IAAAA,KAAK,EAAE;AAHgB,GAAL,CAAb,CAAP;AAKD;AAEM,MAAM/C,oBAAoB,GAAG,CAClC,KADkC,EAElC,KAFkC,EAGlC,KAHkC,EAIlC,KAJkC,EAKlC,KALkC,EAMlC,KANkC,EAOlC,KAPkC,EAQlC,KARkC,EASlC,KATkC,EAUlC,KAVkC,EAWlC,KAXkC,EAYlC,KAZkC,CAA7B;AAeA,MAAMgD,sBAAsB,GAAG,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf,EAAsB,KAAtB,EAA6B,KAA7B,EAAoC,KAApC,EAA2C,KAA3C,CAA/B;AAEA,MAAMC,cAAc,GAAG;AAC5BC,EAAAA,MAAM,EAAElD,oBADoB;AAE5BmD,EAAAA,QAAQ,EAAEH,sBAFkB;AAG5BI,EAAAA,UAAU,EAAE,qCAHgB;AAI5BC,EAAAA,MAAM,EAAE;AACNC,IAAAA,IAAI,EAAE,MADA;AAENC,IAAAA,IAAI,EAAE;AAFA;AAJoB,CAAvB;;MC/CDC,gBAA0C,GAAG,CAAC;AAClDC,EAAAA,IADkD;AAElDC,EAAAA,WAAW,GAAG,CAFoC;AAGlDC,EAAAA,WAAW,GAAG,CAHoC;AAIlDC,EAAAA,SAAS,GAAG,EAJsC;AAKlDC,EAAAA,QALkD;AAMlD1C,SAAAA,OAAK,GAAG7B,SAN0C;AAOlDwE,EAAAA,UAAU,GAAG,cAPqC;AAQlDC,EAAAA,QAAQ,GAAG,EARuC;AASlDC,EAAAA,eAAe,GAAG,KATgC;AAUlDC,EAAAA,eAAe,GAAG,KAVgC;AAWlDC,EAAAA,cAAc,GAAG,KAXiC;AAYlDhE,EAAAA,MAAM,EAAEiE,UAZ0C;AAalDC,EAAAA,OAAO,GAAG,KAbwC;AAclDC,EAAAA,iBAAiB,GAAG,KAd8B;AAelDC,EAAAA,KAAK,GAAG,EAf0C;AAgBlDvC,EAAAA,KAAK,EAAEwC,SAhB2C;AAiBlD9F,EAAAA,SAAS,GAAG,CAjBsC;;AAAA,CAAD,KAkBtC;AAAA;;AACX,MAAI2F,OAAJ,EAAa;AACXX,IAAAA,IAAI,GAAGpB,iBAAiB,EAAxB;AACD;;AAED,MAAIoB,IAAI,CAAC/E,MAAL,KAAgB,CAApB,EAAuB;AACrB,WAAO,IAAP;AACD;;AAED,QAAMoB,KAAK,GAAGvB,YAAY,CAACkF,IAAD,EAAOhF,SAAP,CAA1B;AACA,QAAM2E,UAAU,GAAGK,IAAI,CAACxD,MAAL,CAAY,CAACuE,GAAD,EAAMjE,GAAN,KAAciE,GAAG,GAAGjE,GAAG,CAACuC,KAApC,EAA2C,CAA3C,CAAnB;AACA,QAAMR,IAAI,GAAGmC,OAAO,CAAC7F,QAAQ,WAAC6E,IAAI,CAAC,CAAD,CAAL,2CAAC,OAAS5E,IAAV,CAAT,CAApB;AAEA,QAAMkD,KAAK,GAAGD,QAAQ,CAACyC,SAAD,EAAYpD,OAAZ,CAAtB;AACA,QAAMjB,MAAM,GAAG8B,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBgB,cAAlB,EAAkCkB,UAAlC,CAAf;AACA,QAAMO,UAAU,GAAGT,eAAe,GAAG,CAAH,GAAOF,QAAQ,GAAG,IAAIL,WAAxD;;AAEA,WAASiB,aAAT,GAAyB;AACvB,WAAO;AACLC,MAAAA,KAAK,EAAE9E,KAAK,CAACpB,MAAN,IAAgBkF,SAAS,GAAGF,WAA5B,IAA2CA,WAD7C;AAELmB,MAAAA,MAAM,EAAEH,UAAU,GAAG,CAACd,SAAS,GAAGF,WAAb,IAA4B,CAAzC,GAA6CA;AAFhD,KAAP;AAID;;AAED,WAASoB,iBAAT,CAA2BC,YAA3B,EAA8C;AAC5C,UAAMlG,IAAI,GAAGmG,MAAM,CAACpG,QAAQ,CAACmG,YAAY,CAAClG,IAAd,CAAT,EAA8BiF,UAA9B,CAAnB;AACA,WAAQ,WAAUiB,YAAY,CAACjC,KAAM,8BAA6BjE,IAAK,EAAvE;AACD;;AAED,WAASoG,YAAT,GAAwB;AACtB,UAAMX,KAAK,GAAG;AACZP,MAAAA;AADY,KAAd;;AAIA,QAAI,CAACM,iBAAD,IAAsBJ,eAA1B,EAA2C;AACzC,aAAO,IAAP;AACD;;AAED,wBACE,0CACGI,iBAAiB,iBAChB;AAAG,MAAA,SAAS,EAAEnC,YAAY,CAAC,gBAAD,CAA1B;AAA8C,MAAA,KAAK,EAAEoC;AAArD,OACGxE,KAAK,CAAC,CAAD,CAAL,CAASL,GAAT,CAAa,CAACc,GAAD,EAAMO,CAAN,KAAY;AACxB,UAAI,CAACP,GAAD,IAAQO,CAAC,GAAG,CAAJ,KAAU,CAAtB,EAAyB;AACvB,eAAO,IAAP;AACD;;AAED,YAAMoE,QAAQ,GAAGnG,MAAM,CAACH,QAAQ,CAAC2B,GAAG,CAAC1B,IAAL,CAAT,CAAvB;AAEA,0BACE;AACE,QAAA,CAAC,EAAE,CAAC,CAAD,GAAK6E,WADV;AAEE,QAAA,CAAC,EAAEgB,UAAU,IAAIX,QAAQ,GAAG,CAAX,GAAeL,WAAnB,CAAV,GAA4C,CAACE,SAAS,GAAGF,WAAb,IAA4B5C,CAF7E;AAGE,QAAA,UAAU,EAAC,KAHb;AAIE,QAAA,GAAG,EAAEP,GAAG,CAAC1B;AAJX,SAMGqB,MAAM,CAACiD,QAAP,GAAkBjD,MAAM,CAACiD,QAAP,CAAgB+B,QAAhB,CAAlB,GAA8ClC,sBAAsB,CAACkC,QAAD,CANvE,CADF;AAUD,KAjBA,CADH,CAFJ,EAuBG,CAACjB,eAAD,iBACC;AAAG,MAAA,SAAS,EAAE/B,YAAY,CAAC,cAAD,CAA1B;AAA4C,MAAA,KAAK,EAAEoC;AAAnD,OACGzE,cAAc,CAACC,KAAD,EAAQI,MAAM,CAACgD,MAAf,CAAd,CAAqCzD,GAArC,CAAyC,CAAC;AAAEmB,MAAAA,IAAF;AAAQC,MAAAA;AAAR,KAAD,EAAcT,KAAd,EAAqBF,MAArB,KAAgC;AACxE;AACA,UAAIE,KAAK,KAAK,CAAV,IAAeF,MAAM,CAAC,CAAD,CAArB,IAA4BA,MAAM,CAAC,CAAD,CAAN,CAAUW,CAAV,GAAcA,CAAd,IAAmBzC,yBAAnD,EAA8E;AAC5E,eAAO,IAAP;AACD;;AAED,0BACE;AAAM,QAAA,CAAC,EAAE,CAACwF,SAAS,GAAGF,WAAb,IAA4B7C,CAArC;AAAwC,QAAA,iBAAiB,EAAC,SAA1D;AAAoE,QAAA,GAAG,EAAEA;AAAzE,SACGD,IADH,CADF;AAKD,KAXA,CADH,CAxBJ,CADF;AA0CD;;AAED,WAASuE,YAAT,GAAwB;AACtB,WAAOrF,KAAK,CACTL,GADI,CACA,CAACU,IAAD,EAAOiF,SAAP,KACHjF,IAAI,CAACV,GAAL,CAAS,CAACc,GAAD,EAAM2E,QAAN,KAAmB;AAC1B,UAAI,CAAC3E,GAAL,EAAU;AACR,eAAO,IAAP;AACD;;AAED,YAAM+D,KAAK,GAAGF,OAAO,GACjB;AACEiB,QAAAA,SAAS,EAAG,GAAEjD,MAAM,CAACkD,gBAAiB,4BADxC;AAEEC,QAAAA,cAAc,EAAG,GAAEH,SAAS,GAAG,EAAZ,GAAiBF,QAAQ,GAAG,EAAG;AAFpD,OADiB,GAKjB5F,SALJ;AAOA,0BACE;AACE,QAAA,CAAC,EAAE,CADL;AAEE,QAAA,CAAC,EAAEoF,UAAU,GAAG,CAACd,SAAS,GAAGF,WAAb,IAA4BwB,QAF9C;AAGE,QAAA,KAAK,EAAEtB,SAHT;AAIE,QAAA,MAAM,EAAEA,SAJV;AAKE,QAAA,IAAI,EAAE7B,KAAK,CAAE,QAAOxB,GAAG,CAACwC,KAAM,EAAnB,CALb;AAME,QAAA,EAAE,EAAEY,WANN;AAOE,QAAA,EAAE,EAAEA,WAPN;AAQE,QAAA,SAAS,EAAEvB,MAAM,CAACoD,KARpB;AASE,qBAAWjF,GAAG,CAAC1B,IATjB;AAUE,oBAAUgF,QAAQ,GAAGiB,iBAAiB,CAACvE,GAAD,CAApB,GAA4BjB,SAVhD;AAWE,QAAA,GAAG,EAAEiB,GAAG,CAAC1B,IAXX;AAYE,QAAA,KAAK,EAAEyF;AAZT,QADF;AAgBD,KA5BD,CAFG,EAgCJ7E,GAhCI,CAgCA,CAACU,IAAD,EAAOU,CAAP,kBACH;AAAG,MAAA,GAAG,EAAEA,CAAR;AAAW,MAAA,SAAS,EAAG,aAAY,CAAC+C,SAAS,GAAGF,WAAb,IAA4B7C,CAAE;AAAjE,OACGV,IADH,CAjCG,CAAP;AAqCD;;AAED,WAASsF,YAAT,GAAwB;AAAA;;AACtB,QAAIvB,cAAc,IAAIF,eAAtB,EAAuC;AACrC,aAAO,IAAP;AACD;;AAED,wBACE;AACE,MAAA,SAAS,EAAE9B,YAAY,CAAC,QAAD,EAAWE,MAAM,CAACsD,MAAlB,CADzB;AAEE,MAAA,KAAK,EAAE;AAAEC,QAAAA,SAAS,EAAEjC,WAAb;AAA0BK,QAAAA;AAA1B;AAFT,OAKGK,OAAO,iBAAI,wCALd,EAOG,CAACA,OAAD,IAAY,CAACF,cAAb,iBACC;AAAK,MAAA,SAAS,EAAEhC,YAAY,CAAC,OAAD;AAA5B,OACGhC,MAAM,CAACkD,UAAP,GACGlD,MAAM,CAACkD,UAAP,CACGwC,OADH,CACW,WADX,EACwBC,MAAM,CAACzC,UAAD,CAD9B,EAEGwC,OAFH,CAEW,UAFX,EAEuBC,MAAM,CAACvD,IAAD,CAF7B,CADH,GAII,GAAEc,UAAW,qBAAoBd,IAAK,EAL7C,CARJ,EAiBG,CAAC8B,OAAD,IAAY,CAACJ,eAAb,iBACC;AAAK,MAAA,SAAS,EAAE9B,YAAY,CAAC,eAAD,CAA5B;AAA+C,MAAA,KAAK,EAAE;AAAE4D,QAAAA,UAAU,EAAE;AAAd;AAAtD,oBACE;AAAM,MAAA,KAAK,EAAE;AAAEC,QAAAA,WAAW,EAAE;AAAf;AAAb,8BAAwC7F,MAAxC,aAAwCA,MAAxC,yCAAwCA,MAAM,CAAEmD,MAAhD,mDAAwC,eAAgBC,IAAxD,qEAAgE,MAAhE,CADF,EAEGnE,KAAK,CAAC,CAAD,CAAL,CACEE,IADF,CACOC,SADP,EAEEG,GAFF,CAEM,CAACC,CAAD,EAAIU,KAAJ,kBACH;AAAK,MAAA,KAAK,EAAEwD,SAAZ;AAAuB,MAAA,MAAM,EAAEA,SAA/B;AAA0C,MAAA,GAAG,EAAExD,KAA/C;AAAsD,MAAA,KAAK,EAAE;AAAE4F,QAAAA,MAAM,EAAE;AAAV;AAA7D,oBACE;AACE,MAAA,KAAK,EAAEpC,SADT;AAEE,MAAA,MAAM,EAAEA,SAFV;AAGE,MAAA,IAAI,EAAE7B,KAAK,CAAE,QAAO3B,KAAM,EAAf,CAHb;AAIE,MAAA,EAAE,EAAEuD,WAJN;AAKE,MAAA,EAAE,EAAEA;AALN,MADF,CAHH,CAFH,eAeE;AAAM,MAAA,KAAK,EAAE;AAAEmC,QAAAA,UAAU,EAAE;AAAd;AAAb,8BAAuC5F,MAAvC,aAAuCA,MAAvC,0CAAuCA,MAAM,CAAEmD,MAA/C,oDAAuC,gBAAgBE,IAAvD,qEAA+D,MAA/D,CAfF,CAlBJ,CADF;AAuCD;;AAED,QAAM;AAAEqB,IAAAA,KAAF;AAASC,IAAAA;AAAT,MAAoBF,aAAa,EAAvC;AACA,QAAMsB,gBAAgB,GAAG;AACvBrB,IAAAA,KADuB;AAEvBsB,IAAAA,QAAQ,EAAE,MAFa;AAGvB;AACA,KAAE,KAAI/H,SAAU,UAAhB,GAA4B4D,KAAK,CAACF,MAJX;AAKvB,KAAE,KAAI1D,SAAU,iBAAhB,GAAmCgI,KAAS,CAACpE,KAAK,CAACF,MAAP,CAAT,CAAwBT,MAAxB,CAA+B,CAA/B,EAAkCgF,QAAlC;AALZ,GAAzB;AAQA,sBACE;AAAS,IAAA,SAAS,EAAEjI,SAApB;AAA+B,IAAA,KAAK,EAAE,EAAE,GAAGmG,KAAL;AAAY,SAAG2B;AAAf;AAAtC,kBACE;AACE,IAAA,KAAK,EAAErB,KADT;AAEE,IAAA,MAAM,EAAEC,MAFV;AAGE,IAAA,OAAO,EAAG,OAAMD,KAAM,IAAGC,MAAO,EAHlC;AAIE,IAAA,SAAS,EAAE3C,YAAY,CAAC,UAAD,EAAaE,MAAM,CAACiE,QAApB;AAJzB,KAMG,CAACjC,OAAD,IAAYa,YAAY,EAN3B,EAOGE,YAAY,EAPf,CADF,EAUGM,YAAY,EAVf,EAWG5B,QAXH,CADF;AAeD;;MAEYyC,QAAgD,GAAGC,KAAK,iBACnE,oBAAC,gBAAD;AAAkB,EAAA,IAAI,EAAE;AAAxB,GAAgCA,KAAhC;;;;"}